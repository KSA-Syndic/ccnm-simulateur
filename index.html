<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de Classification et R√©mun√©ration - M√©tallurgie 2024</title>
    <!-- Popper.js & Tippy.js pour les tooltips -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/shift-away.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="simulator-container">
        <!-- En-t√™te -->
        <header class="simulator-header">
            <h1>üè≠ Simulateur M√©tallurgie 2024</h1>
            <p class="subtitle">
                Classification et R√©mun√©ration
                <span class="header-info tooltip-trigger__light" data-tippy-content="Estimez votre classification et v√©rifiez vos minima salariaux, selon la &lt;strong&gt;Convention Collective M√©tallurgie 2024&lt;/strong&gt; et l'&lt;strong&gt;Accord Kuhn&lt;/strong&gt;.&lt;br&gt;üìã &lt;a href='https://cfdt-kuhn.fr/droits/convention-collective-metallurgie/' target='_blank'&gt;Guide complet et convention PDF&lt;/a&gt;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></span>
            </p>
        </header>

        <!-- Indicateur de progression -->
        <div class="wizard-progress" id="wizard-progress">
            <div class="progress-step active" data-step="1">
                <span class="progress-dot">1</span>
                <span class="progress-label">Classification</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="2">
                <span class="progress-dot">2</span>
                <span class="progress-label">Situation</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="3">
                <span class="progress-dot">3</span>
                <span class="progress-label">R√©sultat</span>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- √âTAPE 1 : CLASSIFICATION -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard-step active" id="step-1">
            
            <!-- 1A: Choix du mode -->
            <div class="step-content" id="step-1a">
                <h2>Connaissez-vous votre classification ?</h2>
                <p class="step-subtitle">Elle figure sur votre fiche de paie (ex: F11, D7, A1...)</p>
                
                <div class="choice-cards">
                    <button class="choice-card" id="btn-connais-classe">
                        <span class="choice-icon">‚úì</span>
                        <span class="choice-title">Oui, je la connais</span>
                        <span class="choice-desc">Je saisis directement ma classification</span>
                    </button>
                    
                    <button class="choice-card" id="btn-estimer-classe">
                        <span class="choice-icon">?</span>
                        <span class="choice-title">Non, je veux l'estimer</span>
                        <span class="choice-desc">Je r√©ponds aux 6 crit√®res classants</span>
                    </button>
                </div>
            </div>

            <!-- 1B: Saisie directe de la classe -->
            <div class="step-content hidden" id="step-1b">
                <h2>Votre classification</h2>
                <p class="step-subtitle">S√©lectionnez votre groupe et classe</p>
                
                <div class="classification-direct">
                    <div class="select-group-large">
                        <label for="select-groupe">Groupe</label>
                        <select id="select-groupe" class="book-select book-select-large">
                            <option value="A">A - Employ√©s/Ouvriers</option>
                            <option value="B">B - Employ√©s/Ouvriers</option>
                            <option value="C">C - Techniciens</option>
                            <option value="D">D - Techniciens</option>
                            <option value="E">E - Agents de ma√Ætrise</option>
                            <option value="F">F - Cadres</option>
                            <option value="G">G - Cadres</option>
                            <option value="H">H - Cadres sup√©rieurs</option>
                            <option value="I">I - Cadres dirigeants</option>
                        </select>
                    </div>
                    <div class="select-group-large">
                        <label for="select-classe">Classe</label>
                        <select id="select-classe" class="book-select book-select-large">
                            <!-- Options g√©n√©r√©es dynamiquement -->
                        </select>
                    </div>
                </div>

                <div class="classification-result-mini vertical">
                    <div class="classification-badge large">
                        <span class="groupe" id="groupe-display">A</span>
                        <span class="classe" id="classe-display">1</span>
                    </div>
                    <span class="statut-badge" id="statut-badge">Non-Cadre</span>
                </div>

                <div class="step-actions">
                    <button class="book-btn btn-secondary" id="btn-back-1b">
                        <span class="btn-icon btn-icon-left">‚Äπ</span> Retour
                    </button>
                    <button class="book-btn btn-primary" id="btn-next-1b">
                        Suivant <span class="btn-icon btn-icon-right">‚Ä∫</span>
                    </button>
                </div>
            </div>

            <!-- 1C: Estimation par crit√®res -->
            <div class="step-content hidden" id="step-1c">
                <h2>Estimation de votre classification</h2>
                <p class="step-subtitle">√âvaluez votre poste sur les 6 crit√®res (de 1 √† 10)</p>
                
                <div class="roulettes-container" id="roulettes-container">
                    <!-- Les roulettes seront g√©n√©r√©es dynamiquement -->
                </div>

                <div class="estimation-result vertical">
                    <div class="score-mini">
                        <span class="score-label">Score</span>
                        <span class="score-value" id="score-total">6</span>
                        <span class="score-max">/ 60</span>
                    </div>
                    <div class="classification-badge large" id="classification-estimated">
                        <span class="groupe" id="groupe-auto">A</span>
                        <span class="classe" id="classe-auto">1</span>
                    </div>
                    <span class="statut-badge" id="statut-badge-auto">Non-Cadre</span>
                </div>

                <div class="step-actions">
                    <button class="book-btn btn-secondary" id="btn-back-1c">
                        <span class="btn-icon btn-icon-left">‚Äπ</span> Retour
                    </button>
                    <button class="book-btn btn-primary" id="btn-next-1c">
                        Valider <span class="btn-icon btn-icon-right">‚Ä∫</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- √âTAPE 2 : SITUATION / MODALIT√âS -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard-step hidden" id="step-2">
            <div class="step-content">
                <h2>Votre situation</h2>
                <p class="step-subtitle">Renseignez vos informations pour affiner le calcul</p>

                <!-- R√©cap classification -->
                <div class="recap-classification">
                    <div class="recap-badge-wrapper">
                        <div class="classification-badge small">
                            <span class="groupe" id="recap-groupe">A</span>
                            <span class="classe" id="recap-classe">1</span>
                        </div>
                        <span class="statut-badge small" id="recap-statut">Non-Cadre</span>
                    </div>
                    <button class="btn-link" id="btn-modifier-classe">Modifier</button>
                </div>

                <!-- Anciennet√© -->
                <div class="form-group">
                    <label for="anciennete">
                        Anciennet√© dans l'entreprise
                        <span class="tooltip-trigger" data-tippy-content="Prime d'anciennet√© : CCN d√®s 3 ans (non-cadres), Kuhn d√®s 2 ans (tous).">?</span>
                    </label>
                    <div class="input-with-unit">
                        <input type="number" id="anciennete" class="book-input" min="0" max="50" value="0">
                        <span class="input-unit">ans</span>
                    </div>
                </div>

                <!-- Options Non-Cadre -->
                <div class="modalites-non-cadre" id="modalites-non-cadre">
                    <div class="form-group">
                        <label for="point-territorial">
                            Valeur du Point Territorial
                            <span class="tooltip-trigger" data-tippy-content="Valeur d√©finie par accord territorial. Bas-Rhin 2025 : 5.90‚Ç¨&lt;br&gt;&lt;a href='https://code.travail.gouv.fr/contribution/3248-quand-le-salarie-a-t-il-droit-a-une-prime-danciennete-quel-est-son-montant' target='_blank'&gt;Voir sur code.travail.gouv.fr&lt;/a&gt;">?</span>
                        </label>
                        <div class="input-with-unit">
                            <input type="number" id="point-territorial" class="book-input" min="0" max="20" step="0.01" value="5.90">
                            <span class="input-unit">‚Ç¨</span>
                        </div>
                    </div>
                </div>

                <!-- Options Cadre -->
                <div class="modalites-cadre hidden" id="modalites-cadre">
                    <div class="form-group">
                        <label for="forfait">Type de forfait</label>
                        <select id="forfait" class="book-select">
                            <option value="35h">Base 35h</option>
                            <option value="heures">Forfait Heures (+15%)</option>
                            <option value="jours">Forfait Jours (+30%)</option>
                        </select>
                    </div>

                    <!-- Cadre D√©butant F11/F12 -->
                    <div class="cadre-debutant hidden" id="cadre-debutant">
                        <div class="form-group">
                            <label for="experience-pro">
                                Exp√©rience professionnelle totale
                                <span class="tooltip-trigger" data-tippy-content="Si < 6 ans, bar√®me d√©butants appliqu√©.">?</span>
                            </label>
                            <div class="input-with-unit">
                                <input type="number" id="experience-pro" class="book-input" min="0" max="50" value="0">
                                <span class="input-unit">ans</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Conditions de travail (collapsible) -->
                <details class="conditions-details" id="conditions-travail">
                    <summary>Conditions de travail particuli√®res</summary>
                    
                    <div class="conditions-content">
                        <!-- Note forfait jours -->
                        <div class="book-hint info hidden" id="hint-forfait-jours">
                            <p><strong>üìã Forfait jours :</strong> En tant que cadre au forfait jours, les majorations pour travail de nuit ou du dimanche ne s'appliquent pas financi√®rement. Elles donnent lieu √† du <strong>repos compensateur</strong> (non simulable ici).</p>
                        </div>
                        
                        <!-- Travail de nuit -->
                        <div class="form-group" id="group-nuit">
                            <label for="type-nuit">Travail de nuit</label>
                            <select id="type-nuit" class="book-select">
                                <option value="aucun">Aucun</option>
                                <option value="poste-nuit">Poste de nuit (+20% Kuhn / +15% CCN)</option>
                                <option value="poste-matin">Poste matin/AM (+15%)</option>
                            </select>
                            <div class="sub-field hidden" id="heures-nuit-field">
                                <label for="heures-nuit">Heures de nuit/mois</label>
                                <input type="number" id="heures-nuit" class="book-input" min="0" max="200" value="0">
                            </div>
                        </div>

                        <!-- Travail dimanche -->
                        <div class="form-group" id="group-dimanche">
                            <label class="checkbox-label">
                                <input type="checkbox" id="travail-dimanche" class="book-checkbox">
                                <span>Travail le dimanche</span>
                            </label>
                            <div class="sub-field hidden" id="heures-dimanche-field">
                                <label for="heures-dimanche">Heures dimanche/mois</label>
                                <input type="number" id="heures-dimanche" class="book-input" min="0" max="50" value="0">
                            </div>
                        </div>

                        <!-- Prime d'√©quipe Kuhn -->
                        <div class="form-group hidden" id="prime-equipe-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="travail-equipe" class="book-checkbox">
                                <span>Travail en √©quipes post√©es (Kuhn)</span>
                            </label>
                            <div class="sub-field hidden" id="heures-equipe-field">
                                <label for="heures-equipe">Heures √©quipe/mois</label>
                                <input type="number" id="heures-equipe" class="book-input" min="0" max="200" value="151.67" step="0.01">
                            </div>
                        </div>
                    </div>
                </details>

                <div class="step-actions">
                    <button class="book-btn btn-secondary" id="btn-back-2">
                        <span class="btn-icon btn-icon-left">‚Äπ</span> Retour
                    </button>
                    <button class="book-btn btn-primary" id="btn-next-2">
                        Calculer <span class="btn-icon btn-icon-right">‚Ä∫</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- √âTAPE 3 : R√âSULTAT -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard-step hidden" id="step-3">
            <div class="step-content">
                <h2>Votre r√©mun√©ration</h2>
                <p class="step-subtitle">Salaire Minimum Hi√©rarchique (SMH) annuel brut</p>

                <!-- Options de calcul -->
                <div class="result-options">
                    <!-- Accord Kuhn -->
                    <div class="option-group">
                        <label class="checkbox-label checkbox-highlight">
                            <input type="checkbox" id="accord-kuhn" class="book-checkbox">
                            <span>Appliquer l'accord d'entreprise Kuhn</span>
                            <span class="tooltip-trigger" data-tippy-content="Anciennet√© d√®s 2 ans, nuit +20%, dimanche +50%, prime √©quipe, vacances 525‚Ç¨.">?</span>
                        </label>
                        <!-- Options Kuhn -->
                        <div class="sub-options hidden" id="accord-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="prime-vacances" class="book-checkbox" checked>
                                <span>Prime de vacances (525‚Ç¨/an)</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Carte r√©sultat -->
                <div class="result-card">
                    <div class="result-main">
                        <span class="result-value" id="result-smh">21 500 ‚Ç¨</span>
                        <span class="result-label">par an</span>
                    </div>

                    <div class="result-monthly">
                        <span class="result-value-secondary" id="result-mensuel">1 792 ‚Ç¨</span>
                        <span class="result-label">par mois</span>
                        <div class="months-toggle">
                            <button type="button" class="month-btn active" data-months="12">12 mois</button>
                            <button type="button" class="month-btn" data-months="13">13 mois</button>
                        </div>
                    </div>
                </div>

                <!-- D√©tails -->
                <details class="result-details-toggle" open>
                    <summary>D√©tail du calcul</summary>
                    <div class="result-details" id="result-details">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                </details>

                <!-- Infos contextuelles -->
                <div class="hints-container" id="hints-container">
                    <!-- Hints g√©n√©r√©s dynamiquement -->
                </div>

                <!-- √âvolution -->
                <details class="evolution-details">
                    <summary>üìà √âvolution vs inflation</summary>
                    <div class="evolution-panel" id="evolution-section">
                        <div class="evolution-controls">
                            <label>
                                Projection :
                                <select id="projection-years" class="book-select-inline">
                                    <option value="5">5 ans</option>
                                    <option value="10" selected>10 ans</option>
                                    <option value="15">15 ans</option>
                                    <option value="20">20 ans</option>
                                    <option value="25">25 ans</option>
                                    <option value="30">30 ans</option>
                                    <option value="retraite">Retraite</option>
                                </select>
                            </label>
                            <label class="hidden" id="age-input-wrapper">
                                √Çge :
                                <input type="number" id="age-actuel" class="book-input-small" min="18" max="66" value="30">
                            </label>
                            <label>
                                Augmentation/an :
                                <input type="number" id="augmentation-annuelle" class="book-input-small" min="0" max="10" step="0.1" value="0">%
                            </label>
                        </div>
                        <div class="chart-container">
                            <canvas id="evolution-chart"></canvas>
                        </div>
                        <div class="evolution-summary">
                            <p id="evolution-summary"></p>
                            <small class="data-source" id="inflation-source">Inflation : chargement...</small>
                        </div>
                    </div>
                </details>

                <div class="step-actions">
                    <button class="book-btn btn-secondary" id="btn-back-3">
                        <span class="btn-icon btn-icon-left">‚Äπ</span> Modifier
                    </button>
                    <button class="book-btn btn-primary" id="btn-restart">
                        <span class="btn-icon">‚Üª</span> Recommencer
                    </button>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="simulator-footer">
            <p>Convention Collective M√©tallurgie 2024 ‚Ä¢ <span class="disclaimer">Outil indicatif</span></p>
        </footer>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
